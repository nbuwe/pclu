
/* This file was automatically generated by pclu.*/

#include "pclu_err.h"
#include "pclu_sys.h"


/**** BEGIN PROCEDURE user_name ****/

extern errcode _environ();
static CLUREF STR_USER;
static CLUREF STR_;
static int user_name_own_init = 0;

errcode
user_name(CLUREF *ret_1)
{
    errcode err;
    if (user_name_own_init == 0) {
        stringOPcons("USER", CLU_1, CLUREF_make_num(4), &STR_USER);
        stringOPcons("", CLU_1, CLUREF_make_num(0), &STR_);
        user_name_own_init = 1;
    }
    enter_proc(3);

  LINE(4);
    {
    {
    CLUREF T_2_1;
    err = _environ(STR_USER, &T_2_1);
    if (err != ERR_ok) goto ex_1;
    ret_1->num = T_2_1.num;
    }
    {signal (ERR_ok);}}
        goto end_1;
        ex_1:
            if ((err == ERR_not_found)) {

  LINE(5);
                {
                {
                ret_1->str = STR_.str;
                }
                {signal (ERR_ok);}}
            }
            else {
                goto ex_0;
            }
        end_1:;
    goto end_0;
    ex_0:
        {
            if (err == ERR_failure) {signal(ERR_failure);}
            elist[0] = _pclu_erstr(err);
            {signal(ERR_failure);}
        }
    end_0: elist[0] = no_return_values_STRING;
        {signal(ERR_failure);}
}

/**** END PROCEDURE user_name ****/

