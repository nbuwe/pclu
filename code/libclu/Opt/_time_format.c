
/* This file was automatically generated by pclu.*/

#include "pclu_err.h"
#include "pclu_sys.h"


extern errcode intOPadd();
extern errcode intOPdiv();
extern errcode stringOPconcat();
extern errcode intOPunparse();
extern errcode stringOPrest();
extern errcode intOPmod();
CLUREF STR__056;
CLUREF STR__040seconds;
static int _time_format_own_init = 0;

/**** BEGIN PROCEDURE _time_format ****/

errcode _time_format(sec, msec, usec, ret_1)
CLUREF sec;
CLUREF msec;
CLUREF usec;
CLUREF *ret_1;
    {
    errcode err;
    errcode ecode2;
        if (_time_format_own_init == 0) {
        stringOPcons(".", CLU_1, CLU_1, &STR__056);
        stringOPcons(" seconds", CLU_1, CLU_8, &STR__040seconds);
        _time_format_own_init = 1;
    }
    enter_proc(3);

  LINE(4);
    {
    CLUREF T_1_1;
    CLUREF T_1_2;
    CLUREF T_1_3;
    CLUREF T_1_4;
    CLUREF T_1_5;
    T_1_1.num = 499;
    T_1_2.num = usec.num + T_1_1.num;
     if ((T_1_2.num > 0 && usec.num < 0 && T_1_1.num < 0) || 
         (T_1_2.num < 0 && usec.num > 0 && T_1_1.num > 0)) {
        err = ERR_overflow;
        goto ex_0;}
    T_1_3.num = 1000;
    err = intOPdiv(T_1_2, T_1_3, &T_1_4);
    if (err != ERR_ok) goto ex_0;
    T_1_5.num = msec.num + T_1_4.num;
     if ((T_1_5.num > 0 && msec.num < 0 && T_1_4.num < 0) || 
         (T_1_5.num < 0 && msec.num > 0 && T_1_4.num > 0)) {
        err = ERR_overflow;
        goto ex_0;}
    msec.num = T_1_5.num;
    }

  LINE(5);
    {
    {
    CLUREF T_1_1;
    CLUREF T_1_2;
    CLUREF T_1_3;
    CLUREF T_1_4;
    CLUREF T_1_5;
    CLUREF T_1_6;
    CLUREF T_1_7;
    CLUREF T_1_8;
    CLUREF T_1_9;
    CLUREF T_1_10;
    CLUREF T_1_11;
    CLUREF T_1_12;
    CLUREF T_1_13;
    T_1_1.num = 1000;
    err = intOPdiv(msec, T_1_1, &T_1_2);
    if (err != ERR_ok) goto ex_0;
    T_1_3.num = sec.num + T_1_2.num;
     if ((T_1_3.num > 0 && sec.num < 0 && T_1_2.num < 0) || 
         (T_1_3.num < 0 && sec.num > 0 && T_1_2.num > 0)) {
        err = ERR_overflow;
        goto ex_0;}
    err = intOPunparse(T_1_3, &T_1_4);
    if (err != ERR_ok) goto ex_0;
    err = stringOPconcat(T_1_4, STR__056, &T_1_5);
    if (err != ERR_ok) goto ex_0;
    T_1_6.num = 1000;
    err = intOPmod(msec, T_1_6, &T_1_7);
    if (err != ERR_ok) goto ex_0;
    T_1_8.num = 1000;
    T_1_9.num = T_1_7.num + T_1_8.num;
     if ((T_1_9.num > 0 && T_1_7.num < 0 && T_1_8.num < 0) || 
         (T_1_9.num < 0 && T_1_7.num > 0 && T_1_8.num > 0)) {
        err = ERR_overflow;
        goto ex_0;}
    err = intOPunparse(T_1_9, &T_1_10);
    if (err != ERR_ok) goto ex_0;
    err = stringOPrest(T_1_10, CLU_2, &T_1_11);
    if (err != ERR_ok) goto ex_0;
    err = stringOPconcat(T_1_5, T_1_11, &T_1_12);
    if (err != ERR_ok) goto ex_0;
    err = stringOPconcat(T_1_12, STR__040seconds, &T_1_13);
    if (err != ERR_ok) goto ex_0;
    ret_1->num = T_1_13.num;
    }
    {signal (ERR_ok);}}
    goto end_0;
    ex_0:
        {
            if (err == ERR_failure) {signal(ERR_failure);}
            elist[0] = _pclu_erstr(err);
            {signal(ERR_failure);}
        }
    end_0: elist[0].str = no_return_values_STRING;
        {signal(ERR_failure);}
    }

/**** END PROCEDURE _time_format ****/

